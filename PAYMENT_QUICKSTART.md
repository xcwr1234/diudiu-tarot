# 🚀 支付功能快速开始

欢迎使用 DiuDiu Tarot 支付系统！这是一个 5 分钟快速指南。

## ✅ 已完成的功能

我已经为您设置好了完整的支付界面系统：

### 📱 页面组件

1. **价格表页面** (`/pricing`)
   - 🎨 精美的卡片式设计
   - 💳 支持人民币和美元支付
   - ✨ 三个套餐选择（新手启程、灵性探索、大师之路）
   - 🔐 自动登录检测

2. **支付成功页面** (`/payment/success`)
   - 🎉 彩带庆祝动画
   - ✅ 清晰的成功提示
   - 🎯 快速导航按钮
   - 🔮 塔罗主题装饰

3. **支付失败页面** (`/payment/failed`)
   - ❌ 友好的错误提示
   - 💡 失败原因说明
   - 🔄 重试支付按钮
   - 📞 客服支持链接

### ⚙️ 后端功能

- ✅ Stripe 支付集成
- ✅ 订单创建和管理
- ✅ Webhook 回调处理
- ✅ 积分自动充值
- ✅ 支持一次性付款和订阅

## 🎯 现在可以做什么

### 1️⃣ 查看支付页面（无需配置）

直接访问以下页面查看效果：

```bash
# 启动开发服务器（如果还没启动）
pnpm dev

# 然后在浏览器中访问：
http://localhost:3000/pricing           # 价格表
http://localhost:3000/payment/success   # 支付成功页面
http://localhost:3000/payment/failed    # 支付失败页面
```

### 2️⃣ 配置 Stripe（需要真实支付）

如果您想测试实际支付流程：

#### 快速配置步骤：

1. **注册 Stripe**
   ```
   访问: https://stripe.com
   创建测试账户（免费）
   ```

2. **获取密钥**
   ```
   进入 Stripe Dashboard → 开发者 → API 密钥
   复制 Publishable key 和 Secret key
   ```

3. **创建配置文件**
   ```bash
   # 在项目根目录创建 .env.local 文件
   cp .env.example .env.local
   ```

4. **填写密钥**
   ```env
   STRIPE_PUBLIC_KEY=pk_test_你的公钥
   STRIPE_PRIVATE_KEY=sk_test_你的私钥
   STRIPE_WEBHOOK_SECRET=whsec_暂时留空
   ```

5. **重启服务器**
   ```bash
   # 按 Ctrl+C 停止
   pnpm dev
   ```

6. **测试支付**
   ```
   访问: http://localhost:3000/pricing
   点击购买按钮
   使用测试卡号: 4242 4242 4242 4242
   ```

## 📸 页面预览

### 价格表页面
```
┌────────────────────────────────────────────┐
│     选择您的神秘之旅                         │
│  解锁塔罗的智慧，探索命运的指引              │
│                                            │
│  ┌──────┐  ┌──────┐  ┌──────┐            │
│  │新手  │  │灵性  │  │大师  │            │
│  │启程  │  │探索🔥│  │之路  │            │
│  │¥19.9 │  │¥49.9 │  │¥99.9 │            │
│  │50次  │  │200次 │  │500次 │            │
│  └──────┘  └──────┘  └──────┘            │
└────────────────────────────────────────────┘
```

### 支付成功页面
```
┌────────────────────────────────────────────┐
│              🎉✨                          │
│         [成功图标 + 动画]                    │
│                                            │
│          支付成功！                         │
│     感谢您的购买，订单已处理                 │
│                                            │
│  ┌──────────────────────────┐             │
│  │ 积分已充值      ✨ 立即可用│             │
│  │ 订单状态        ✅ 已完成  │             │
│  └──────────────────────────┘             │
│                                            │
│  [开始使用塔罗占卜]                         │
│  [查看我的订单    ]                         │
└────────────────────────────────────────────┘
```

## 🎨 自定义样式

所有页面使用 Tailwind CSS，支持深色模式：

### 修改价格
编辑 `src/i18n/pages/pricing/zh.json`：
```json
{
  "title": "新手启程",
  "price": "¥19.9",
  "cn_amount": 19900,  // 金额以分为单位
  "credits": 50
}
```

### 修改主题色
编辑 `src/app/theme.css`：
```css
:root {
  --primary: oklch(0.65 0.25 288.0332);  /* 紫色主题 */
}
```

## 📦 包含的文件

```
shipany-template-one-main/
├── src/
│   ├── app/
│   │   ├── [locale]/
│   │   │   ├── payment/
│   │   │   │   ├── success/page.tsx    ← 支付成功页面 ✨
│   │   │   │   └── failed/page.tsx     ← 支付失败页面
│   │   │   └── pricing/page.tsx        ← 价格表页面
│   │   └── api/
│   │       ├── checkout/route.ts       ← 下单 API
│   │       └── stripe-notify/route.ts  ← Webhook 处理
│   ├── components/
│   │   └── blocks/
│   │       └── pricing/index.tsx       ← 价格表组件
│   └── i18n/
│       └── pages/
│           └── pricing/
│               ├── zh.json             ← 中文定价配置 ✨
│               └── en.json             ← 英文定价配置 ✨
├── PAYMENT_SETUP.md                    ← 详细配置指南 ✨
└── PAYMENT_QUICKSTART.md              ← 本文件 ✨
```

## 💰 定价方案

| 套餐 | 原价 | 现价 | 积分 | 有效期 | 特色功能 |
|------|------|------|------|--------|----------|
| 新手启程 | ¥39.9 | **¥19.9** | 50 | 1个月 | 基础解读、每日一卡 |
| 灵性探索 🔥 | ¥99.9 | **¥49.9** | 200 | 3个月 | AI分析、凯尔特十字 |
| 大师之路 | ¥199.9 | **¥99.9** | 500 | 12个月 | 全功能、VIP专属 |

## 🔗 相关链接

- 📖 [完整配置指南](./PAYMENT_SETUP.md)
- 🌐 [Stripe 官方文档](https://stripe.com/docs)
- 💬 [ShipAny 文档](https://docs.shipany.ai/zh/features/payment/stripe)

## ⚡ 下一步

1. ✅ **查看页面效果** - 访问 `/pricing` 查看精美的价格表
2. 🔐 **配置 Stripe** - 如需真实支付，参考上方配置步骤
3. 🎨 **自定义价格** - 修改 `pricing/*.json` 调整套餐
4. 🚀 **部署上线** - 使用 Vercel 或 Cloudflare 部署

## 💡 提示

- 🎨 支持深色/浅色主题切换
- 🌍 支持中英文双语
- 💳 支持微信/支付宝/信用卡
- 📱 完全响应式设计
- ✨ 流畅的动画效果

---

**开始您的塔罗占卜之旅吧！🔮**

有问题？查看 [完整配置指南](./PAYMENT_SETUP.md) 或联系技术支持。 